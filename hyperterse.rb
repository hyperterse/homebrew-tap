# typed: false
# frozen_string_literal: true

# This file was generated by Hyperterse. It is a bare minimum Homebrew formula.
# Documentation: https://docs.brew.sh/Formula-Cookbook
# This file is automatically updated by scripts/version.sh

class Hyperterse < Formula
  desc "A declarative interface to connect your database to your AI agents"
  homepage "https://hyperterse.com"
  version "1.2.1"
  license "Apache-2.0"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/hyperterse/hyperterse/releases/download/v#{version}/hyperterse-darwin-amd64"
      sha256 "6f615360f161dea5614ca63dcffcab2a2fe7db6bd52a127cf1c9897001984baf"
    elsif Hardware::CPU.arm?
      url "https://github.com/hyperterse/hyperterse/releases/download/v#{version}/hyperterse-darwin-arm64"
      sha256 "2e72280082979dd0a58804c7602cd90fb8c43a64ff556f81d3f09cdf97a9686b"
    end
  end

  on_linux do
    if Hardware::CPU.intel?
      url "https://github.com/hyperterse/hyperterse/releases/download/v#{version}/hyperterse-linux-amd64"
      sha256 "b35017f00b4b4599c8a30fe5e71af9ff55dd9012dd67936fa247d6e2968b784b"
    elsif Hardware::CPU.arm?
      if Hardware::CPU.is_64_bit?
        url "https://github.com/hyperterse/hyperterse/releases/download/v#{version}/hyperterse-linux-arm64"
        sha256 "9be1b8e647e78a5a1c0e60aafbe1337e99cd7802cb2666a7f84a646a27b1f706"
      else
        url "https://github.com/hyperterse/hyperterse/releases/download/v#{version}/hyperterse-linux-arm"
        sha256 "a7c831657f56a1aa1cd76ee8872cdbaec7809dbeb3abfe9cd33db8eee01724c5"
      end
    end
  end

  def install
    # Homebrew downloads the binary file, rename it to 'hyperterse'
    binary = Dir["hyperterse-*"].first
    bin.install binary => "hyperterse"
  end

  test do
    system "#{bin}/hyperterse", "--version"
  end
end
