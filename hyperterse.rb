# typed: false
# frozen_string_literal: true

# This file was generated by Hyperterse. It is a bare minimum Homebrew formula.
# Documentation: https://docs.brew.sh/Formula-Cookbook
# This file is automatically updated by scripts/version.sh

class Hyperterse < Formula
  desc "A declarative interface to connect your database to your AI agents"
  homepage "https://hyperterse.com"
  version "1.1.1"
  license "Apache-2.0"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/hyperterse/hyperterse/releases/download/v#{version}/hyperterse-darwin-amd64"
      sha256 "944b6c295fb61a540ebcec935048651ebbd1dcf5824e26a4dc2668bc47684a13"
    elsif Hardware::CPU.arm?
      url "https://github.com/hyperterse/hyperterse/releases/download/v#{version}/hyperterse-darwin-arm64"
      sha256 "ae8ddfee44c528fe0dbd89742a6bac4d255cda53d39cd67ba183878e69b3f10f"
    end
  end

  on_linux do
    if Hardware::CPU.intel?
      url "https://github.com/hyperterse/hyperterse/releases/download/v#{version}/hyperterse-linux-amd64"
      sha256 "d6b70df999be4072b0048000437bbee072ba4c6e739e69a3a71b504880e5ef55"
    elsif Hardware::CPU.arm?
      if Hardware::CPU.is_64_bit?
        url "https://github.com/hyperterse/hyperterse/releases/download/v#{version}/hyperterse-linux-arm64"
        sha256 "234102ad83551db6f1ef32b14db4f2c577a2bdd85956118dd9b9391ac7260535"
      else
        url "https://github.com/hyperterse/hyperterse/releases/download/v#{version}/hyperterse-linux-arm"
        sha256 "88a71b788780b1e226b1a1f3f88105b38c1df8dcc94151ca2f36621c555dcae8"
      end
    end
  end

  def install
    # Homebrew downloads the binary file, rename it to 'hyperterse'
    binary = Dir["hyperterse-*"].first
    bin.install binary => "hyperterse"
  end

  test do
    system "#{bin}/hyperterse", "--version"
  end
end
